{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\nconst formEl = document.querySelector('.js-search-form');\nconst inputEl = document.querySelector('input');\nconst galleryEl = document.querySelector('.gallery');\n\nconst loaderEl = document.querySelector('.loader');\n\nconst loaderMoreEl = document.querySelector('.js-loader')\n\nconst BtnMoreEl = document.querySelector('.more--btn');\nconst nonExistSpan = document.querySelector('.non-existent');\n\nlet count = 1;\nlet searchValue;\n\nconst gallery = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionDelay: 250,\n    fadeSpeed: 250,\n    captionSelector: \"img\",\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n});\n\nasync function promesUrl(number, value) {\n    const urlFromPixaby = new URLSearchParams({\n        key: '41648594-e525389370aefc2e125a1a54e',\n        q: value,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 150,\n        page: number\n    })\n    try {\n\n        const response = await axios({\n            method: 'get',\n            url: `https://pixabay.com/api/?${urlFromPixaby}`\n        });\n\n        if (response.data.hits.length < 40) {\n            // it is lower then 40\n            BtnSwitcherOn()\n        }\n        return response;\n\n    } catch (error) {\n        if (error.message === 'Request failed with status code 400') {\n            BtnSwitcherOn()\n            iziToast.info({\n                title: 'Greetings!',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n        console.log(error)\n    }\n};\n\nasync function response(number, value) {\n    try {\n        const pixabayInformation = await promesUrl(number, value)\n        gallery.refresh();\n        loaderSwitch()\n        if (count !== 1) {\n            galleryEl.insertAdjacentHTML('beforeend', markup(pixabayInformation.data));\n\n        } else {\n            galleryEl.innerHTML = markup(pixabayInformation.data)\n        }\n    } catch (error) {\n        console.log(error)\n    }\n\n};\n\nfunction markup({ hits }) {\n\n    const typset = hits.map(item => `\n    <li class=\"gallery__item\">\n    <a href=\"${item.largeImageURL}\">\n    <img class=\"gallery--img\" src=\"${item.webformatURL}\" alt=\"${item.tags}\" title=\"${item.tags}\"/>\n    </a>\n<ul class=\"gallery__list--characters\">\n  <p>likes: ${item.likes}</p>\n  <p>views: ${item.views}</p>\n  <p>comments: ${item.comments}</p>\n  <p>downloads: ${item.downloads}</p>\n</ul>\n    </li>\n    `).join('')\n\n\n    return typset\n\n};\n\nconst loaderSwitch = () => {\n\n    loaderEl.classList.toggle('switcher')\n\n};\n\nconst loaderMoreSwitch = () => {\n    loaderMoreEl.classList.toggle('non-existent')\n\n}\n\n\n\nconst izitoast = async () => {\n\n    try {\n\n        const respons = await promesUrl(1, inputEl.value)\n\n        if (respons.data.hits.length === 0) {\n            BtnSwitcherOn()\n            galleryEl.innerHTML = ''\n            return iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n\n        }\n        BtnSwitcherOf()\n\n    } catch (error) {\n        console.log(error)\n    }\n\n};\n\n\nloaderSwitch();\n\nconst BtnSwitcherOn = () => {\n    return BtnMoreEl.classList.add('switcher');\n};\n\nconst BtnSwitcherOf = () => {\n    return BtnMoreEl.classList.remove('switcher');\n};\n\nconst saveInputValue = (e) => {\n    nonExistSpan.textContent = e;\n    return nonExistSpan.textContent;\n};\n\n\n\n\n\nformEl.addEventListener('submit', (event) => {\n    event.preventDefault()\n    count = 1;\n    loaderSwitch()\n    response(1, inputEl.value)\n    izitoast()\n    saveInputValue(inputEl.value);\n    formEl.reset()\n});\n\nBtnMoreEl.addEventListener('click', (event) => {\n    loaderMoreSwitch()\n    count += 1\n    searchValue = nonExistSpan.textContent;\n    response(count, searchValue)\n    loaderSwitch()\n    loaderMoreSwitch()\n});\n"],"names":["formEl","inputEl","galleryEl","loaderEl","loaderMoreEl","BtnMoreEl","nonExistSpan","count","searchValue","gallery","SimpleLightbox","promesUrl","number","value","urlFromPixaby","response","axios","BtnSwitcherOn","error","iziToast","pixabayInformation","loaderSwitch","markup","hits","item","loaderMoreSwitch","izitoast","BtnSwitcherOf","saveInputValue","e","event"],"mappings":"owBAMA,MAAMA,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAU,SAAS,cAAc,OAAO,EACxCC,EAAY,SAAS,cAAc,UAAU,EAE7CC,EAAW,SAAS,cAAc,SAAS,EAE3CC,EAAe,SAAS,cAAc,YAAY,EAElDC,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAe,SAAS,cAAc,eAAe,EAE3D,IAAIC,EAAQ,EACRC,EAEJ,MAAMC,EAAU,IAAIC,EAAe,aAAc,CAC7C,SAAU,GACV,aAAc,IACd,UAAW,IACX,gBAAiB,MACjB,aAAc,MACd,gBAAiB,QACrB,CAAC,EAED,eAAeC,EAAUC,EAAQC,EAAO,CACpC,MAAMC,EAAgB,IAAI,gBAAgB,CACtC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,IACV,KAAMD,CACd,CAAK,EACD,GAAI,CAEA,MAAMG,EAAW,MAAMC,EAAM,CACzB,OAAQ,MACR,IAAK,4BAA4BF,GAC7C,CAAS,EAED,OAAIC,EAAS,KAAK,KAAK,OAAS,IAE5BE,EAAe,EAEZF,CAEV,OAAQG,EAAP,CACMA,EAAM,UAAY,wCAClBD,EAAe,EACfE,EAAS,KAAK,CACV,MAAO,aACP,QAAS,4DACzB,CAAa,GAEL,QAAQ,IAAID,CAAK,CACpB,CACL,CAEA,eAAeH,EAASH,EAAQC,EAAO,CACnC,GAAI,CACA,MAAMO,EAAqB,MAAMT,EAAUC,EAAQC,CAAK,EACxDJ,EAAQ,QAAO,EACfY,EAAc,EACVd,IAAU,EACVL,EAAU,mBAAmB,YAAaoB,EAAOF,EAAmB,IAAI,CAAC,EAGzElB,EAAU,UAAYoB,EAAOF,EAAmB,IAAI,CAE3D,OAAQF,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CAEL,CAEA,SAASI,EAAO,CAAE,KAAAC,GAAQ,CAiBtB,OAfeA,EAAK,IAAIC,GAAQ;AAAA;AAAA,eAErBA,EAAK;AAAA,qCACiBA,EAAK,sBAAsBA,EAAK,gBAAgBA,EAAK;AAAA;AAAA;AAAA,cAG5EA,EAAK;AAAA,cACLA,EAAK;AAAA,iBACFA,EAAK;AAAA,kBACJA,EAAK;AAAA;AAAA;AAAA,KAGlB,EAAE,KAAK,EAAE,CAKd,CAEA,MAAMH,EAAe,IAAM,CAEvBlB,EAAS,UAAU,OAAO,UAAU,CAExC,EAEMsB,EAAmB,IAAM,CAC3BrB,EAAa,UAAU,OAAO,cAAc,CAEhD,EAIMsB,EAAW,SAAY,CAEzB,GAAI,CAIA,IAFgB,MAAMf,EAAU,EAAGV,EAAQ,KAAK,GAEpC,KAAK,KAAK,SAAW,EAC7B,OAAAgB,EAAe,EACff,EAAU,UAAY,GACfiB,EAAS,MAAM,CAClB,MAAO,QACP,QAAS,0EACzB,CAAa,EAGLQ,EAAe,CAElB,OAAQT,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CAEL,EAGAG,IAEA,MAAMJ,EAAgB,IACXZ,EAAU,UAAU,IAAI,UAAU,EAGvCsB,EAAgB,IACXtB,EAAU,UAAU,OAAO,UAAU,EAG1CuB,EAAkBC,IACpBvB,EAAa,YAAcuB,EACpBvB,EAAa,aAOxBN,EAAO,iBAAiB,SAAW8B,GAAU,CACzCA,EAAM,eAAgB,EACtBvB,EAAQ,EACRc,EAAc,EACdN,EAAS,EAAGd,EAAQ,KAAK,EACzByB,EAAU,EACVE,EAAe3B,EAAQ,KAAK,EAC5BD,EAAO,MAAO,CAClB,CAAC,EAEDK,EAAU,iBAAiB,QAAUyB,GAAU,CAC3CL,EAAkB,EAClBlB,GAAS,EACTC,EAAcF,EAAa,YAC3BS,EAASR,EAAOC,CAAW,EAC3Ba,EAAc,EACdI,EAAkB,CACtB,CAAC"}